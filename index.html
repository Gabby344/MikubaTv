<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIKUBA TV | Actualité RDC, Kolwezi & Internationale - En Direct</title>
    
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Load Font Inter & Tone.js (TTS Playback) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js"></script>

    <style>
        /* Configuration de base et personnalisation Tailwind */
        :root {
            --primary-color: #B70000; /* Rouge Profond Mikuba */
            --secondary-color: #0F0F10; /* Noir Rich */
            --accent-color: #008CBA; /* Bleu Cyber Électrique */
            --background-body: #F0F2F5; /* Gris clair de fond professionnel */
        }
        
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': 'var(--primary-color)',
                        'secondary': 'var(--secondary-color)',
                        'accent': 'var(--accent-color)',
                        'body-bg': 'var(--background-body)',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    boxShadow: {
                        '3xl': '0 35px 60px -15px rgba(0, 0, 0, 0.3)',
                        'primary-lg': '0 10px 15px -3px rgba(183, 0, 0, 0.2), 0 4px 6px -2px rgba(183, 0, 0, 0.15)',
                    }
                }
            }
        }

        /* Style spécifique */
        .section-heading {
            @apply text-3xl font-extrabold pb-3 mb-6 tracking-tight;
        }
        .section-heading-primary {
            border-bottom: 4px solid var(--primary-color);
        }
        .section-heading-secondary {
            border-bottom: 2px solid theme('colors.gray.300');
            @apply text-xl font-bold mb-4;
        }

        /* Scrollbar élégante pour la section émissions */
        .emissions-scroll::-webkit-scrollbar {
            height: 6px;
        }
        .emissions-scroll::-webkit-scrollbar-thumb {
            background: rgba(183, 0, 0, 0.4);
            border-radius: 10px;
        }
        .emissions-scroll::-webkit-scrollbar-thumb:hover {
            background: var(--primary-color);
        }
        .emissions-scroll {
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) var(--background-body);
        }

        /* Effet de fondu sur l'image de l'article principal */
        .major-news-overlay {
            background-image: linear-gradient(to top, rgba(15, 15, 16, 0.95), rgba(15, 15, 16, 0.7) 40%, transparent 100%);
        }

        /* Custom animation for the live button */
        @keyframes pulse-ring {
            0% { transform: scale(0.3); opacity: 0.8; }
            100% { transform: scale(1.5); opacity: 0; }
        }
        .live-pulse-ring {
            animation: pulse-ring 2s cubic-bezier(0.2, 0.2, 0, 1) infinite;
        }

    </style>
</head>
<body class="bg-body-bg text-secondary antialiased">

    <!-- FIREBASE & TTS LOGIC -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-auth.js";
        import { getFirestore, doc, setDoc, onSnapshot, collection, query, limit, getDocs, setLogLevel } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-firestore.js";

        // Variables globales Canvas
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'mikuba-tv-app';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        let db = null;
        let auth = null;
        let currentUserId = null;
        setLogLevel('Debug'); // Activation des logs

        // --- TTS & Audio Helpers (Inclus pour la fonction "Qui Parle") ---
        const base64ToArrayBuffer = (base64) => {
            const binaryString = atob(base64);
            const len = binaryString.length;
            const bytes = new Uint8Array(len);
            for (let i = 0; i < len; i++) { bytes[i] = binaryString.charCodeAt(i); }
            return bytes.buffer;
        };

        const pcmToWav = (pcm16, sampleRate) => {
            const numChannels = 1, bytesPerSample = 2;
            const dataLength = pcm16.length * bytesPerSample;
            const buffer = new ArrayBuffer(44 + dataLength);
            const view = new DataView(buffer);
            let offset = 0;
            const writeString = (s) => { for (let i = 0; i < s.length; i++) { view.setUint8(offset++, s.charCodeAt(i)); } };

            writeString('RIFF'); view.setUint32(offset, 36 + dataLength, true); offset += 4; writeString('WAVE');
            writeString('fmt '); view.setUint32(offset, 16, true); offset += 4; view.setUint16(offset, 1, true); offset += 2; 
            view.setUint16(offset, numChannels, true); offset += 2; view.setUint32(offset, sampleRate, true); offset += 4; 
            view.setUint32(offset, sampleRate * numChannels * bytesPerSample, true); offset += 4; view.setUint16(offset, numChannels * bytesPerSample, true); offset += 2; 
            view.setUint16(offset, 16, true); offset += 2; 
            writeString('data'); view.setUint32(offset, dataLength, true); offset += 4;

            for (let i = 0; i < pcm16.length; i++) { view.setInt16(offset, pcm16[i], true); offset += 2; }
            return new Blob([view], { type: 'audio/wav' });
        };

        window.speakNews = async (text, button) => {
            if (!text || !button) return;

            // Stocker l'état initial pour le restaurer après la lecture
            button.dataset.originalText = button.textContent.trim();
            button.dataset.originalIcon = button.querySelector('svg')?.outerHTML || '';
            
            button.disabled = true;
            button.innerHTML = '<svg class="w-5 h-5 mr-2 animate-spin text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 12m5.018-7.5l2.427 2.427m0 0l2.427 2.427m-2.427-2.427V21"></path></svg> Lecture en cours...';

            // Limiter le texte pour l'API
            const cleanText = text.substring(0, 1000).trim();

            const payload = {
                contents: [{ parts: [{ text: cleanText }] }],
                generationConfig: {
                    responseModalities: ["AUDIO"],
                    speechConfig: { voiceConfig: { prebuiltVoiceConfig: { voiceName: "Rasalgethi" } } }
                },
                model: "gemini-2.5-flash-preview-tts"
            };

            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-tts:generateContent?key=${apiKey}`;

            try {
                let response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                if (!response.ok) { throw new Error(`TTS API failed: ${response.statusText}`); }

                const result = await response.json();
                const part = result?.candidates?.[0]?.content?.parts?.[0];
                const audioData = part?.inlineData?.data;
                const mimeType = part?.inlineData?.mimeType;

                const restoreButton = () => {
                    button.disabled = false;
                    button.innerHTML = button.dataset.originalIcon + ' ' + button.dataset.originalText;
                };

                if (audioData && mimeType && mimeType.startsWith("audio/L16")) {
                    const sampleRateMatch = mimeType.match(/rate=(\d+)/);
                    const sampleRate = sampleRateMatch ? parseInt(sampleRateMatch[1], 10) : 24000;

                    const pcmData = base64ToArrayBuffer(audioData);
                    const pcm16 = new Int16Array(pcmData);
                    const wavBlob = pcmToWav(pcm16, sampleRate);
                    const audioUrl = URL.createObjectURL(wavBlob);

                    const audio = new Audio(audioUrl);
                    audio.onended = () => {
                        restoreButton();
                        URL.revokeObjectURL(audioUrl);
                    };
                    audio.onerror = (e) => {
                        console.error('Audio playback error:', e);
                        button.innerHTML = '❌ Lecture échouée';
                        setTimeout(restoreButton, 3000);
                        URL.revokeObjectURL(audioUrl);
                    };

                    await Tone.start();
                    audio.play();

                } else {
                    console.error("Erreur: Données audio non valides ou format incorrect.", result);
                    button.innerHTML = '❌ Erreur audio';
                    setTimeout(restoreButton, 3000);
                }

            } catch (error) {
                console.error("Erreur Gemini TTS:", error);
                button.innerHTML = '❌ Erreur TTS';
                setTimeout(() => {
                    button.disabled = false;
                    button.innerHTML = button.dataset.originalIcon + ' ' + button.dataset.originalText;
                }, 3000);
            }
        };


        // --- Firestore MOCK DATA ---
        const dbPath = (collectionName) => { return `/artifacts/${appId}/public/data/${collectionName}`; };

        const MOCK_NEWS = [
            {
                id: 'une-principale',
                title: "Lualaba : Inauguration de la nouvelle centrale hydroélectrique par le gouverneur. Quel impact sur l'exploitation minière à Kolwezi ?",
                category: "ÉCONOMIE & RDC",
                summary: "La crise énergétique dans le Grand Katanga pourrait bientôt être un lointain souvenir. Cette nouvelle infrastructure promet une augmentation significative de la production minière, source de tensions et d'espoirs pour la population.",
                content: "Le projet, financé en partenariat public-privé, vise à sécuriser l'approvisionnement des grandes compagnies de cobalt et de cuivre opérant dans la région de Kolwezi. L'inauguration, marquée par la présence du Président et du gouverneur, a été l'occasion de réaffirmer l'engagement du pays à transformer les matières premières localement. Cependant, des voix s'élèvent déjà concernant l'accès des populations locales à cette nouvelle source d'énergie, exigeant une plus grande équité dans la distribution.",
                imageUrl: "https://placehold.co/1200x600/B70000/FFFFFF?text=UNE+Centrale+Hydroélectrique+Kolwezi",
                views: 18500,
                timestamp: Date.now(),
                is_featured: true
            },
            { id: 'sec-1', title: "Sécurité : Bilan des opérations FARDC dans le Tanganyika, retour au calme à Manono. Les défis de la paix durable.", category: "SÉCURITÉ", imageUrl: "https://placehold.co/400x200/0F0F10/FFFFFF?text=FARDC+Tanganyika", views: 4200, timestamp: Date.now() - 3600000, is_featured: false },
            { id: 'sec-2', title: "Tensions politiques à Kinshasa : Le Parlement vote un nouveau code électoral controversé.", category: "POLITIQUE", imageUrl: "https://placehold.co/400x200/008CBA/FFFFFF?text=Parlement+RDC", views: 11200, timestamp: Date.now() - 7200000, is_featured: false },
            { id: 'sec-3', title: "Chine-Afrique : Nouvel accord d'investissement de 5 milliards dans les infrastructures routières en RDC.", category: "INTERNATIONAL", imageUrl: "https://placehold.co/400x200/B70000/FFFFFF?text=Accord+Chine-RDC", views: 5500, timestamp: Date.now() - 10800000, is_featured: false },
            { id: 'sec-4', title: "Culture : Le Festival de Kolwezi célèbre les artistes locaux, grand succès populaire. Focus sur la danse traditionnelle.", category: "SOCIÉTÉ", imageUrl: "https://placehold.co/400x200/0F0F10/FFFFFF?text=Festival+Kolwezi", views: 2100, timestamp: Date.now() - 14400000, is_featured: false }
        ];

        const MOCK_EMISSIONS = [
            { id: 'e1', title: "Grand Débat du Samedi", description: "Analyse approfondie de la politique congolaise. Invités de marque pour décrypter l'actualité.", host: "Patrick L. M.", time: "20h00 - 21h30 (Heure de Kolwezi)", category: "Débat", imageUrl: "https://placehold.co/500x300/008CBA/FFFFFF?text=GRAND+DÉBAT" },
            { id: 'e2', title: "Le Dossier de l'Investisseur", description: "Tout sur le marché du Cobalt, du Cuivre et les opportunités d'affaires au Lualaba.", host: "Jeanne K.", time: "Chaque Mercredi à 19h00", category: "Économie", imageUrl: "https://placehold.co/500x300/B70000/FFFFFF?text=INVESTISSEUR" },
            { id: 'e3', title: "Sport Mag' : Le Week-end", description: "Résumé complet des championnats locaux et internationaux. Focus sur la Linafoot et les talents émergents.", host: "Fiston T.", time: "Lundi 19h30", category: "Sport", imageUrl: "https://placehold.co/500x300/0F0F10/FFFFFF?text=SPORT+MAG" },
            { id: 'e4', title: "Santé pour Tous", description: "Conseils et interviews sur les enjeux de santé publique en RDC. Prévention et soins essentiels.", host: "Dr. Sylvie N.", time: "Jeudi 18h30", category: "Santé", imageUrl: "https://placehold.co/500x300/6B7280/FFFFFF?text=SANTÉ" }
        ];

        // --- RENDER & AUTH LOGIC ---

        const initializeAndPopulate = async () => {
            try {
                const app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);

                // Authentification
                if (initialAuthToken) { await signInWithCustomToken(auth, initialAuthToken); } else { await signInAnonymously(auth); }

                const newsCollectionRef = collection(db, dbPath('news'));
                const emissionsCollectionRef = collection(db, dbPath('emissions'));
                
                // Check and set initial News data (Mise à jour pour ne pas recréer à chaque fois si déjà là)
                if ((await getDocs(query(newsCollectionRef, limit(1)))).empty) {
                    await Promise.all(MOCK_NEWS.map(item => setDoc(doc(db, dbPath('news'), item.id), item)));
                    console.log("Données d'actualité de démonstration ajoutées.");
                }
                
                // Check and set initial Emissions data
                if ((await getDocs(query(emissionsCollectionRef, limit(1)))).empty) {
                    await Promise.all(MOCK_EMISSIONS.map(item => setDoc(doc(db, dbPath('emissions'), item.id), item)));
                    console.log("Données d'émissions de démonstration ajoutées.");
                }

                // Lancement des écouteurs Firestore après l'authentification
                onAuthStateChanged(auth, (user) => {
                    currentUserId = user ? user.uid : crypto.randomUUID();
                    loadNews();
                    loadEmissions();
                });

            } catch (error) {
                console.error("Erreur critique Firebase:", error);
                document.getElementById('major-news-container').innerHTML =
                    '<div class="bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-xl shadow-md mt-6 col-span-full"><h3>Erreur Critique!</h3><p>Impossible de charger les services en ligne. Vérifiez la console (F12) et l\'état de la base de données.</p></div>';
            }
        };

        const renderMajorNews = (article) => {
            const container = document.getElementById('major-news-container');
            if (!container || !article) {
                container.innerHTML = '<p class="text-center text-gray-500 mt-10">Aucune actualité principale disponible.</p>';
                return;
            }

            container.innerHTML = `
                <div class="relative bg-white rounded-2xl shadow-3xl overflow-hidden group cursor-pointer transition-all duration-500 hover:shadow-primary-lg">
                    <img src="${article.imageUrl}" alt="${article.title}" class="w-full h-[55vh] min-h-[350px] object-cover bg-gray-200 transition-transform duration-700 group-hover:scale-[1.05] group-hover:blur-[1px]">
                    <div class="major-news-overlay absolute inset-0"></div>
                    <div class="absolute bottom-0 p-6 md:p-10 text-white w-full">
                        <span class="inline-block px-4 py-1.5 text-sm font-black bg-primary rounded-full mb-3 uppercase shadow-lg transform translate-y-0 group-hover:-translate-y-1 transition-transform duration-300">${article.category}</span>
                        <h3 class="text-3xl md:text-5xl lg:text-5xl font-extrabold mb-4 leading-tight">${article.title}</h3>
                        <p class="text-gray-200 text-lg mb-6 max-h-24 overflow-hidden font-medium">${article.summary}</p>
                        
                        <!-- Bouton "Qui Parle" (TTS Feature) -->
                        <button id="tts-button" data-original-text="Lire l'article à voix haute (IA)" data-original-icon='<svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 3a1 1 0 00-1.447-.894L8.717 5.97A.75.75 0 008 6.643v5.994c0 .354.296.65.643.717l7.836 4.673A1 1 0 0018 17V3z" clip-rule="evenodd"></path></svg>'
                                class="flex items-center bg-accent text-white font-bold py-3 px-8 rounded-full shadow-2xl shadow-accent/50 hover:bg-opacity-90 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-[1.02]">
                            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M18 3a1 1 0 00-1.447-.894L8.717 5.97A.75.75 0 008 6.643v5.994c0 .354.296.65.643.717l7.836 4.673A1 1 0 0018 17V3z" clip-rule="evenodd"></path></svg>
                            Lire l'article à voix haute (IA)
                        </button>
                    </div>
                </div>
            `;

            const ttsButton = document.getElementById('tts-button');
            if (ttsButton) {
                ttsButton.addEventListener('click', () => window.speakNews(article.content, ttsButton));
            }
        };

        const renderSecondaryNews = (articles) => {
            const container = document.getElementById('secondary-news-container');
            if (!container) return;
            if (articles.length === 0) { container.innerHTML = '<p class="col-span-full text-center text-gray-500">Aucun reportage récent.</p>'; return; }

            container.innerHTML = articles.map(article => `
                <div class="bg-white border border-gray-100 rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer hover:-translate-y-0.5">
                    <img src="${article.imageUrl}" alt="${article.title}" class="w-full h-40 object-cover bg-gray-100">
                    <div class="p-4 flex flex-col justify-between h-[150px]">
                        <div>
                            <span class="text-xs font-semibold text-accent uppercase">${article.category}</span>
                            <h3 class="text-base font-bold text-secondary mt-1 hover:text-primary transition-colors duration-200 line-clamp-3">${article.title}</h3>
                        </div>
                        <p class="text-xs text-gray-500 mt-2 flex justify-between items-center pt-2 border-t border-gray-100">
                            <span>🕒 ${new Date(article.timestamp).toLocaleDateString('fr-FR')}</span>
                            <span class="text-primary font-bold">${(article.views / 1000).toFixed(1)}K vues</span>
                        </p>
                    </div>
                </div>
            `).join('');
        };
        
        const renderTrendingNews = (articles) => {
            const container = document.getElementById('trending-list');
            if (!container) return;
            if (articles.length === 0) { container.innerHTML = '<li><span class="text-gray-500">Pas d\'articles tendances.</span></li>'; return; }

            container.innerHTML = articles.map((article, index) => `
                <li class="py-3 border-b border-gray-200 last:border-b-0 group">
                    <a href="#" class="flex items-start">
                        <div class="text-3xl font-black text-primary mr-3 transform group-hover:scale-105 transition-transform duration-200">${index + 1}</div>
                        <div>
                            <p class="font-semibold text-secondary group-hover:text-primary transition-colors duration-200 leading-snug">${article.title}</p>
                            <span class="text-xs text-gray-500 block mt-1">${article.views.toLocaleString('fr-FR')} lectures</span>
                        </div>
                    </a>
                </li>
            `).join('');
        };

        const renderEmissions = (emissions) => {
            const container = document.getElementById('emissions-scroll-container');
            if (!container) return;
            if (emissions.length === 0) { container.innerHTML = '<p class="text-center text-gray-500 w-full">Aucune émission planifiée.</p>'; return; }

            container.innerHTML = emissions.map(emission => `
                <div class="w-80 flex-shrink-0 bg-white rounded-xl shadow-xl overflow-hidden transition-shadow duration-300 hover:shadow-primary-lg border-t-8 border-primary/90">
                    <img src="${emission.imageUrl}" alt="${emission.title}" class="w-full h-40 object-cover bg-gray-200">
                    <div class="p-5">
                        <span class="text-xs font-medium text-gray-500 uppercase">${emission.category}</span>
                        <h3 class="text-xl font-bold text-secondary mb-2 mt-1">${emission.title}</h3>
                        <p class="text-sm text-gray-700 h-10 overflow-hidden mb-3">${emission.description}</p>
                        
                        <div class="flex items-center justify-between text-sm font-medium border-t border-gray-100 pt-3">
                            <div class="text-gray-600 flex items-center">
                                <svg class="w-4 h-4 mr-1 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path></svg>
                                ${emission.host}
                            </div>
                            <div class="text-primary font-bold flex items-center">
                                <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l3 3a1 1 0 001.414-1.414L11 9.586V6z" clip-rule="evenodd"></path></svg>
                                ${emission.time.split(' (')[0]}
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        };

        const loadNews = () => {
            if (!db) return;
            const newsCollectionRef = collection(db, dbPath('news'));
            const q = query(newsCollectionRef);

            onSnapshot(q, (snapshot) => {
                let allNews = [];
                snapshot.forEach((doc) => { allNews.push({ id: doc.id, ...doc.data() }); });
                allNews.sort((a, b) => b.timestamp - a.timestamp);

                const majorNews = allNews.find(item => item.is_featured) || allNews[0];
                const secondaryNews = allNews.filter(item => !item.is_featured).slice(0, 4);
                const trendingNews = [...allNews].sort((a, b) => b.views - a.views).slice(0, 5);

                renderMajorNews(majorNews);
                renderSecondaryNews(secondaryNews);
                renderTrendingNews(trendingNews);
            }, (error) => {
                console.error("Erreur onSnapshot News:", error);
            });
        };

        const loadEmissions = () => {
            if (!db) return;
            const emissionsCollectionRef = collection(db, dbPath('emissions'));
            const q = query(emissionsCollectionRef);

            onSnapshot(q, (snapshot) => {
                let allEmissions = [];
                snapshot.forEach((doc) => { allEmissions.push({ id: doc.id, ...doc.data() }); });
                renderEmissions(allEmissions);
            }, (error) => {
                console.error("Erreur onSnapshot Emissions:", error);
            });
        };

        // --- Initialisation au chargement du DOM ---
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('current-date').textContent = new Date().toLocaleDateString('fr-FR', {
                weekday: 'long', day: 'numeric', month: 'long', year: 'numeric'
            });

            initializeAndPopulate();
        });
    </script>
    
    <!-- TOP BAR - Live Status, Date & Location -->
    <div class="bg-secondary text-gray-300 text-sm py-2 px-4 shadow-xl border-b border-gray-700">
        <div class="max-w-7xl mx-auto flex justify-between items-center font-medium">
            <span class="flex items-center text-primary font-bold tracking-wider">
                <span class="relative flex h-3 w-3 mr-2">
                    <span class="live-pulse-ring absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"></span>
                    <span class="relative inline-flex rounded-full h-3 w-3 bg-red-600"></span>
                </span>
                LIVE : EN COURS
            </span>
            <div class="flex items-center space-x-6">
                <span class="hidden sm:flex items-center text-gray-400">
                    <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"></path></svg>
                    KOLWEZI, LUALABA (RDC)
                </span>
                <span id="current-date" class="flex items-center text-gray-400">
                    <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path></svg>
                    Chargement...
                </span>
            </div>
        </div>
    </div>

    <!-- HEADER - Logo and Main Navigation -->
    <header class="bg-white py-5 shadow-lg sticky top-0 z-20 border-b-2 border-primary/20">
        <div class="max-w-7xl mx-auto px-4 flex justify-between items-center">
            <div class="logo text-5xl font-black text-secondary tracking-tight">
                MIKUBA<span class="text-primary text-6xl font-extrabold ml-0.5">TV</span>
            </div>
            <nav class="hidden lg:flex space-x-8">
                <a href="#" class="text-secondary font-bold uppercase text-sm tracking-wider hover:text-primary transition-colors duration-200 py-1 border-b-2 border-transparent hover:border-primary">Accueil</a>
                <a href="#" class="text-secondary font-bold uppercase text-sm tracking-wider hover:text-primary transition-colors duration-200 py-1 border-b-2 border-transparent hover:border-primary">RDC / Lualaba</a>
                <a href="#" class="text-secondary font-bold uppercase text-sm tracking-wider hover:text-primary transition-colors duration-200 py-1 border-b-2 border-transparent hover:border-primary">International</a>
                <a href="#" class="text-secondary font-bold uppercase text-sm tracking-wider hover:text-primary transition-colors duration-200 py-1 border-b-2 border-transparent hover:border-primary">Économie</a>
                <a href="#" class="text-secondary font-bold uppercase text-sm tracking-wider hover:text-primary transition-colors duration-200 py-1 border-b-2 border-transparent hover:border-primary">Sport</a>
                <a href="#" class="text-accent font-black uppercase text-sm tracking-wider transition-colors duration-200 py-1 border-b-2 border-transparent hover:border-accent">Contact Pro</a>
            </nav>
            <!-- Search & Mobile Menu -->
            <div class="flex items-center space-x-4">
                <button class="text-secondary hover:text-primary p-3 rounded-full bg-gray-100 transition-colors shadow-inner hidden sm:block">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                </button>
                <button class="lg:hidden text-2xl text-secondary hover:text-primary p-3 rounded-lg bg-gray-100 transition-colors shadow-inner font-bold">☰</button>
            </div>
        </div>
    </header>

    <!-- SECTION ÉMISSIONS (Visuellement améliorée) -->
    <section class="max-w-7xl mx-auto p-4 pt-10">
        <h2 class="section-heading section-heading-primary text-secondary">
            <span class="text-accent">🎙️</span> PROGRAMME TV & ÉMISSIONS PHARE
        </h2>
        <p class="text-gray-600 mb-6 font-medium">Ne manquez aucun de nos programmes essentiels sur l'actualité congolaise et mondiale.</p>
        
        <!-- Conteneur à défilement horizontal (amélioré pour le défilement et les cartes) -->
        <div id="emissions-scroll-container" class="emissions-scroll flex space-x-6 overflow-x-auto pb-4">
            <!-- Contenu des émissions chargé par JavaScript -->
        </div>
    </section>

    <!-- MAIN CONTAINER - 3 Column Layout -->
    <main class="max-w-7xl mx-auto p-4 mt-8 grid grid-cols-1 lg:grid-cols-4 gap-8">
        
        <!-- COLUMN 1: SIDEBAR GAUCHE (Navigation - Sticky) -->
        <aside class="lg:col-span-1 hidden lg:block pr-6 h-fit sticky top-[100px]">
            <h2 class="section-heading-secondary font-extrabold text-secondary tracking-wider uppercase">FILS D'ACTUALITÉ</h2>
            <ul class="space-y-2 bg-white p-5 rounded-xl shadow-2xl border-l-4 border-accent">
                <li><a href="#" class="block p-3 text-gray-700 font-semibold rounded-lg hover:bg-accent/10 hover:text-accent transition-all duration-150">Politique RDC (Kinshasa)</a></li>
                <li><a href="#" class="block p-3 text-gray-700 font-semibold rounded-lg hover:bg-accent/10 hover:text-accent transition-all duration-150">Mines & Hydro (Kolwezi)</a></li>
                <li><a href="#" class="block p-3 text-gray-700 font-semibold rounded-lg hover:bg-accent/10 hover:text-accent transition-all duration-150">Société & Éducation</a></li>
                <li><a href="#" class="block p-3 text-gray-700 font-semibold rounded-lg hover:bg-accent/10 hover:text-accent transition-all duration-150">Faits Divers & Judiciaire</a></li>
                <li><a href="#" class="block p-3 text-gray-700 font-semibold rounded-lg hover:bg-accent/10 hover:text-accent transition-all duration-150">Santé Publique</a></li>
            </ul>
            
            <!-- Espace Publicitaire Mock -->
            <div class="mt-8 p-6 bg-white rounded-xl text-center border-4 border-dashed border-gray-300 shadow-xl">
                <p class="text-sm font-black text-gray-700">PUBLICITÉ 300x250</p>
                <p class="text-xs text-gray-500 mt-1">Contactez le service commercial MIKUBA TV</p>
            </div>
        </aside>
        
        <!-- COLUMN 2: ZONE ÉDITORIALE (Prend 2/4 sur desktop) -->
        <section class="lg:col-span-2">
            
            <!-- À LA UNE (Plus dramatique et impactant) -->
            <div id="major-news-container">
                <!-- Contenu chargé par JavaScript -->
                <div class="bg-white rounded-2xl p-12 text-center shadow-3xl">
                    <h3 class="text-3xl font-black text-primary animate-pulse">Chargement de la UNE...</h3>
                    <p class="text-gray-500 mt-2">Initialisation des données en temps réel via Firestore.</p>
                </div>
            </div>

            <!-- Reportages Récents -->
            <h2 class="section-heading-secondary mt-12 font-extrabold text-secondary tracking-wider uppercase">DERNIERS REPORTAGES</h2>
            <div id="secondary-news-container" class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                <!-- Contenu chargé par JavaScript -->
            </div>
        </section>

        <!-- COLUMN 3: SIDEBAR DROITE (Tendances / Live - Sticky) -->
        <aside class="lg:col-span-1 h-fit sticky top-[100px]">
            
            <!-- Annonce Live (Amélioration du Call-to-Action) -->
            <div class="p-6 bg-secondary text-white rounded-xl shadow-3xl mb-8 text-center border-b-8 border-primary transition-all duration-300 hover:scale-[1.01] hover:shadow-primary-lg">
                <h3 class="text-2xl font-black mb-2 uppercase tracking-widest text-primary">PROGRAMME EN COURS</h3>
                <p class="text-sm text-gray-300">Regardez le flux en direct ou retrouvez les derniers JT.</p>
                <button class="mt-4 w-full bg-primary text-white font-black py-3 rounded-full shadow-2xl shadow-primary/50 hover:bg-red-700 transition-colors duration-200 flex items-center justify-center transform hover:scale-[1.01] uppercase tracking-widest">
                    <svg class="w-6 h-6 mr-2 animate-pulse" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"></path></svg>
                    REGARDER LE LIVE
                </button>
            </div>
            
            <!-- Les Plus Lus (Trending - Nouveau style) -->
            <h2 class="section-heading-secondary font-extrabold text-secondary tracking-wider uppercase">🔥 TENDANCE ACTU</h2>
            <ul id="trending-list" class="bg-white p-5 rounded-xl shadow-2xl divide-y divide-gray-100 border-l-8 border-accent/70">
                <!-- Contenu chargé par JavaScript -->
            </ul>

        </aside>

    </main>

    <!-- FOOTER -->
    <footer class="text-center py-10 px-4 mt-16 bg-secondary text-gray-400 border-t-8 border-primary shadow-inner">
        <div class="max-w-7xl mx-auto">
            <div class="logo text-4xl font-black text-white mb-6">
                MIKUBA<span class="text-primary text-5xl font-extrabold ml-0.5">TV</span>
            </div>
            <div class="flex flex-col md:flex-row justify-center space-y-3 md:space-y-0 md:space-x-12 mb-6 font-semibold text-sm tracking-wider">
                <a href="#" class="hover:text-white transition-colors duration-200">À Propos | Qui Sommes-Nous</a>
                <a href="#" class="hover:text-white transition-colors duration-200">Publicité & Partenariats</a>
                <a href="#" class="hover:text-white transition-colors duration-200">Charte Éditoriale</a>
                <a href="#" class="hover:text-white transition-colors duration-200">Recrutement & Carrières</a>
            </div>
            <p class="text-xs mt-6 text-gray-500">MIKUBA TV Kolwezi | La Voix du Lualaba. &copy; 2025 Tous droits réservés.</p>
        </div>
    </footer>

</body>
</html>
